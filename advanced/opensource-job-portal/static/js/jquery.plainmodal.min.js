!function(e,t){"use strict";function o(t,o){var n=e.extend(!0,{duration:200,effect:{open:e.fn.fadeIn,close:e.fn.fadeOut},overlay:{opacity:.6,zIndex:9e3},fixOverlay:!1,closeClass:I+"-close"},o);return n.overlay.fillColor=n.overlay.fillColor||n.overlay.color||"#888",n.zIndex=n.zIndex||n.overlay.zIndex+1,p||(p=e(window),g=e('<div class="'+I+'-overlay" />').css({position:"fixed",left:0,top:0,width:"100%",height:"150%",display:"none"}).appendTo(v=e("body")).click(i).on("touchmove",function(){return!1}),e(document).focusin(function(t){L&&!L.has(t.target).length&&(m?m.focus():e(document.activeElement).blur())}).keydown(function(e){return L&&27===e.keyCode?i(e):void 0})),t.each(function(){var t=e(this),o={position:"fixed",display:"none",zIndex:n.zIndex};n.offset?"function"==typeof n.offset?n.offset=function(e){return function(){var t=this;return e.call(t,function(){l.call(t)})}}(n.offset):(o.left=n.offset.left,o.top=n.offset.top,o.marginLeft=o.marginTop=""):n.offset=l,n.closeClass&&t.find("."+n.closeClass).off("click",i).click(i),e.each([["open",k],["close",T],["beforeopen",E],["beforeclose",q]],function(e,o){var i=o[0],r=o[1];"function"==typeof n[i]&&t.off(r,n[i]).on(r,n[i])}),t.css(o).data(C,n).appendTo(v).on("touchmove",function(){return!1})})}function n(n,l){function f(e){var t=e.data(C);return t.child&&t.child.index(P)>-1}function y(){d=t,P.find("a,input,select,textarea,button,object,area,img,map").each(function(){var t=e(this);return t.focus().get(0)===document.activeElement?(m=t,!1):void 0}),q&&(z.jqActive&&z.jqActive.length&&z.jqActive.focus(),z=t),L=P,P.trigger(k)}var I,T,q,j,A,O,D,B,H,P=n.length?n.eq(0):t;return s||!P?n:((l||!(I=P.data(C)))&&(I=o(P,l).data(C)),!u&&d&&d.get(0)!==P.get(0)&&(I.force||f(d))&&(d.stop(!0,!0),g.stop(!0,!0)),O=L&&L.get(0)!==P.get(0),!z&&!u&&O&&f(L)&&(z={parent:L,child:P.insertAfter(L),jqActive:e(document.activeElement).blur()}),!u&&O&&(I.force||z)?(u=P,i(L)):null===L&&(s=!0,T=e.Event(E,{cancelable:!0}),P.trigger(T),T.isDefaultPrevented()||(A=!u&&!z&&!I.fixOverlay,z&&(q=P.get(0)===z.parent.get(0),j=P.get(0)===z.child.get(0)),A&&(x||(D=v.get(0).style,x={overflow:D.overflow},B=v.prop("clientWidth"),H=v.prop("clientHeight"),v.css("overflow","hidden"),B-=v.prop("clientWidth"),H-=v.prop("clientHeight"),x.marginRight=D.marginRight,x.marginBottom=D.marginBottom,0>B&&v.css("marginRight","+="+-B),0>H&&v.css("marginBottom","+="+-H)),h=e(document.activeElement).blur(),b===t&&(b=p.scrollLeft(),w=p.scrollTop(),p.scroll(a))),m=null,c(P,I),window.setTimeout(function(){q?y():(I.effect.open.call(d=P,I.duration,y),j&&r(z.parent,!0,I.duration))},0),A&&g.css({backgroundColor:I.overlay.fillColor,zIndex:I.overlay.zIndex}).fadeTo(I.duration,I.overlay.opacity),L=0),s=!1),n)}function i(o){function i(){var i;d=t,I&&(x&&(v.css(x),x=t),h&&h.length&&h.focus(),b!==t&&(p.off("scroll",a).scrollLeft(b).scrollTop(w),b=t)),L=null,i=e.Event(T),E?i.from=o:u&&(i.from=u),c.trigger(i),u?(n(u),u=t):m&&n(z.parent)}var c,l,f,y,m,I,k,E=o instanceof e.Event;return!s&&L&&(s=!0,c=E||o.index(L)>-1?L:t,c&&(f=e.Event(q,{cancelable:!0}),E?f.from=o:u&&(f.from=u),c.trigger(f),f.isDefaultPrevented()?u=t:(l=c.data(C),I=!u&&!z&&!l.fixOverlay,z&&(y=c.get(0)===z.parent.get(0),m=c.get(0)===z.child.get(0)),k=u?0:l.duration,window.setTimeout(function(){y?i():(l.effect.close.call(d=c,k,i),m&&r(z.parent,!1,l.duration))},0),I&&g.fadeOut(k),L=0)),s=!1),E?(o.preventDefault(),!1):o}function r(e,o,n,i){function r(e){g.css("opacity",(1-c.overlay.opacity)/(1-e)*-1+1)}var c,l=e.length?e.eq(0):t;l&&(c=l.data(C))&&(o===t&&(o=!0),n=n||c.duration,y=y||g.clone(!0).appendTo(v),g.stop(!0).css({backgroundColor:c.overlay.fillColor,zIndex:c.overlay.zIndex}),y.stop(!0).css({backgroundColor:c.overlay.fillColor,zIndex:c.zIndex}).insertAfter(l),o?(g.css({opacity:c.overlay.opacity,display:"block"}),y.css({opacity:0,display:"block"}).animate({opacity:c.overlay.opacity},{duration:n,step:r,complete:function(){g.css("display","none"),i&&i()}})):(g.css({opacity:0,display:"block"}),y.css({opacity:c.overlay.opacity,display:"block"}).animate({opacity:0},{duration:n,step:r,complete:function(){y.css("display","none"),i&&i()}})))}function c(e,t){var o;t=t||e.data(C),"function"==typeof t.offset&&(o=t.offset.call(e))&&e.css({left:o.left,top:o.top,marginLeft:"",marginTop:""})}function l(){this.css({left:"50%",top:"50%",marginLeft:"-"+this.outerWidth()/2+"px",marginTop:"-"+this.outerHeight()/2+"px"})}function a(e){return p.scrollLeft(b).scrollTop(w),e.preventDefault(),!1}function f(e,n,i){var r,c=e.length?e.eq(0):t;if(c&&(r=c.data(C)||o(c).data(C),r.hasOwnProperty(n)))return null!=i&&(r[n]=i),r[n]}var s,u,d,p,v,g,y,h,m,x,b,w,z,C="plainModal",I=C.toLowerCase(),k=I+"open",T=I+"close",E=I+"beforeopen",q=I+"beforeclose",L=null;e(function(){e(window).resize(function(){L&&c(L)})}),e.fn[C]=function(e,t,c,l){return"open"===e?n(this,t):"close"===e?i(this):"blur"===e?r(this,t,c,l):"option"===e?f(this,t,c):o(this,e)}}(jQuery);